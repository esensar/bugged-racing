[gd_scene load_steps=13 format=2]

[ext_resource path="res://assets/basic_buggy.glb" type="PackedScene" id=1]
[ext_resource path="res://vehicles/tire_smoke.tscn" type="PackedScene" id=2]
[ext_resource path="res://vehicles/vehicle.gd" type="Script" id=3]

[sub_resource type="Curve" id=2]
_data = [ Vector2( 0, 0 ), 0.0, 0.0, 0, 0, Vector2( 0.0660377, 0.243255 ), 0.0, 0.0, 0, 0, Vector2( 0.240566, 0.315982 ), 0.0, 0.0, 0, 0, Vector2( 0.45283, 0.927273 ), 0.0, 0.0, 0, 0, Vector2( 0.891509, 1 ), 0.0, 0.0, 0, 0, Vector2( 1, 0 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="Curve" id=4]
_data = [ Vector2( 0, 0 ), 0.0, 0.0, 0, 0, Vector2( 0.0849057, 1 ), 0.0, 0.0, 0, 0, Vector2( 0.15566, 0.746591 ), 0.0, 0.0, 0, 0, Vector2( 0.349057, 1 ), 0.0, 0.0, 0, 0, Vector2( 0.382075, 0 ), 0.0, 0.0, 0, 0, Vector2( 0.400943, 1 ), 0.0, 0.0, 0, 0, Vector2( 0.438679, 0 ), 0.0, 0.0, 0, 0, Vector2( 1, 1 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="BoxShape" id=1]
extents = Vector3( 0.521885, 0.334919, 1.78849 )

[sub_resource type="AudioStreamGenerator" id=3]
mix_rate = 5500.0

[sub_resource type="Curve" id=8]
_data = [ Vector2( 0, 1 ), 0.0, 0.0, 0, 0, Vector2( 1, 0.205682 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="CurveTexture" id=9]
curve = SubResource( 8 )

[sub_resource type="ParticlesMaterial" id=5]
direction = Vector3( 0, 0, -1 )
gravity = Vector3( 0, 0.2, 0 )
initial_velocity = 0.8
scale = 0.2
scale_random = 0.25
scale_curve = SubResource( 9 )
color = Color( 0.521569, 0.521569, 0.521569, 0.435294 )

[sub_resource type="SpatialMaterial" id=10]
flags_transparent = true
vertex_color_use_as_albedo = true

[sub_resource type="SphereMesh" id=7]
material = SubResource( 10 )
radial_segments = 4
rings = 3

[node name="buggy" groups=["car"] instance=ExtResource( 1 )]
mass = 150.0
script = ExtResource( 3 )
BASE_ENGINE_PITCH = 0.95
gear_ratios = [ 3.4, 2.5, 2.0, 1.5, 1.25, 1.0 ]
power_curve = SubResource( 2 )
sound_curve = SubResource( 4 )

[node name="front_left" parent="." index="1"]
use_as_traction = true
use_as_steering = true
wheel_radius = 0.6
wheel_rest_length = 0.4
wheel_friction_slip = 1.75
suspension_travel = 1.0
suspension_stiffness = 5.95

[node name="CollisionShape" type="CollisionShape" parent="." index="2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.23227, 0 )
shape = SubResource( 1 )

[node name="front_right" parent="." index="4"]
transform = Transform( 1, 0, 0, 0, 1, -1.50996e-07, 0, 1.50996e-07, 1, -0.950754, 0.503756, 1.41438 )
use_as_traction = true
use_as_steering = true
wheel_radius = 0.6
wheel_rest_length = 0.4
wheel_friction_slip = 1.75
suspension_travel = 1.0
suspension_stiffness = 5.95

[node name="front_right" parent="front_right" index="0"]
transform = Transform( -1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0 )

[node name="rear_left" parent="." index="5"]
use_as_traction = true
wheel_radius = 0.6
wheel_rest_length = 0.4
wheel_friction_slip = 1.8
suspension_travel = 1.0
suspension_stiffness = 5.95

[node name="rear_right" parent="." index="6"]
transform = Transform( 1, 0, 0, 0, 1, -1.50996e-07, 0, 1.50996e-07, 1, -0.950755, 0.503756, -1.41438 )
use_as_traction = true
wheel_radius = 0.6
wheel_rest_length = 0.4
wheel_friction_slip = 1.8
suspension_travel = 1.0
suspension_stiffness = 5.95

[node name="rear_right" parent="rear_right" index="0"]
transform = Transform( -1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0 )

[node name="engine_sound_player" type="AudioStreamPlayer3D" parent="." index="7"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.14201, 0.968668 )
stream = SubResource( 3 )
unit_db = 14.0
bus = "Sound"

[node name="Smoke" type="Particles" parent="." index="8"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.855953, -1.87797 )
local_coords = false
process_material = SubResource( 5 )
draw_pass_1 = SubResource( 7 )

[node name="fl_tire_smoke" parent="." index="9" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.950754, -0.0380455, 1.41438 )

[node name="fr_tire_smoke" parent="." index="10" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, -1.50996e-07, 0, 1.50996e-07, 1, -0.950754, -0.038045, 1.41438 )

[node name="rl_tire_smoke" parent="." index="11" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.950753, -0.0380455, -1.41438 )

[node name="rr_tire_smoke" parent="." index="12" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, -1.50996e-07, 0, 1.50996e-07, 1, -0.950755, -0.038045, -1.41438 )
